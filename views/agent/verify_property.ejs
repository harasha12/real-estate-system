<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Verify Property</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f1f5f9;
  --card:#ffffff;
  --ink:#0f172a;
  --muted:#64748b;
  --primary:#2563eb;
  --success:#22c55e;
  --warning:#f59e0b;
  --border:#e5e7eb;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:Poppins, Arial, sans-serif;
  background:
    radial-gradient(circle at 10% 10%, #e0f2fe, transparent 40%),
    radial-gradient(circle at 90% 20%, #fef3c7, transparent 40%),
    var(--bg);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* MAIN CARD */
.container{
  width:640px;
  background:var(--card);
  border-radius:24px;
  padding:38px;
  box-shadow:0 35px 80px rgba(0,0,0,0.15);
}

/* PAGE TITLE */
.container h2{
  margin:0;
  font-size:24px;
  font-weight:600;
  color:var(--ink);
  position:relative;
  padding-bottom:12px;
}

.container h2::after{
  content:"";
  position:absolute;
  left:0;
  bottom:0;
  width:64px;
  height:3px;
  border-radius:3px;
  background:linear-gradient(90deg,var(--primary),#60a5fa);
}

/* SUBTITLE */
.subtitle{
  font-size:14px;
  color:var(--muted);
  margin:16px 0 30px;
}

/* INFO */
.info{
  background:#f8fafc;
  border:1px solid var(--border);
  border-radius:16px;
  padding:18px;
  margin-bottom:36px;
}

.info p{
  margin:6px 0;
  font-size:14px;
  color:#334155;
}

/* SECTION */
.section{
  margin-bottom:42px;
}

/* SECTION HEADINGS */
.section h3{
  margin:0 0 18px;
  font-size:16px;
  font-weight:600;
  color:var(--ink);
  position:relative;
  padding-bottom:8px;
}

.section h3::after{
  content:"";
  position:absolute;
  left:0;
  bottom:0;
  width:44px;
  height:2px;
  border-radius:2px;
  background:linear-gradient(90deg,var(--primary),#93c5fd);
}

/* UPLOAD CARD */
.upload-card{
  background:#f8fafc;
  border:1px solid var(--border);
  border-radius:18px;
  padding:22px;
  margin-top:18px;
}

/* FILE INPUT BOX */
.file-box{
  border: 2px dashed #cbd5f5;
  border-radius: 16px;
  padding: 28px 24px;
  cursor: pointer;
  transition: .25s;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 6px;
  background: #f9fbff;
}

.file-box:hover{
  border-color:var(--primary);
  background:#ffffff;
  box-shadow:0 10px 24px rgba(15,23,42,0.08);
}

.file-box b{
  font-size:14px;
  color:var(--ink);
}

.file-box p{
  margin:0;
  font-size:13px;
  color:var(--muted);
}

input[type="file"]{ display:none; }

/* PREVIEW GRID */
.preview-grid{
  margin-top:16px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.preview-grid img{
  width:90px;
  height:90px;
  object-fit:cover;
  border-radius:10px;
  border:1px solid var(--border);
  box-shadow:0 4px 10px rgba(15,23,42,0.10);
}

/* INPUT */
input{
  width:100%;
  padding:13px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  font-size:14px;
  margin-bottom:14px;
}

input:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(37,99,235,0.15);
}

/* BUTTONS */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  transition:.25s;
  margin-top:18px;
}

/* UPLOAD / PREVIEW BUTTON STYLE */
.upload-btn{
  background:linear-gradient(135deg,var(--primary),#1d4ed8);
  color:white;
}

.upload-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 18px 35px rgba(37,99,235,0.4);
}

/* VERIFY */
.verify-btn{
  background:linear-gradient(135deg,var(--success),#16a34a);
  color:white;
}

.verify-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 18px 35px rgba(34,197,94,0.45);
}

/* SAVE PRICE */
.price-btn{
  background:linear-gradient(135deg,var(--warning),#d97706);
  color:#1e293b;
}

.price-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 18px 35px rgba(245,158,11,0.45);
}
</style>
</head>

<body>

<div class="container">

  <h2>Verify Property</h2>
  <div class="subtitle">Complete verification before listing goes live</div>

  <!-- PROPERTY INFO -->
  <div class="info">
    <p><b>üìç Location:</b> <%= property.location %></p>
    <p><b>üìê Area:</b> <%= property.area_size %></p>
  </div>

  <!-- IMAGE UPLOAD -->
  <div class="section">
    <h3>Upload Verified Images</h3>

    <form 
      method="POST"
      action="/agent/upload-images/<%= property.id %>"
      enctype="multipart/form-data"
    >
      <div class="upload-card">
        <label class="file-box">
          üì∑ <b>Select Property Images</b>
          <p>Multiple images allowed</p>
          <input
            id="imageInput"
            type="file"
            name="images"
            multiple
            accept="image/*"
            required
          >
        </label>

        <!-- Preview button -->
        <button type="button" class="upload-btn" id="previewBtn">
          Preview Images
        </button>

        <!-- Thumbnails container -->
        <div id="previewContainer" class="preview-grid"></div>

        <!-- Actual submit -->
        <button class="upload-btn" type="submit" style="margin-top:14px;">
          Upload Images
        </button>
      </div>
    </form>
  </div>

  <!-- VERIFY PROPERTY -->
  <div class="section">
    <h3>Property Approval</h3>

    <form method="POST" action="/agent/verify-property/<%= property.id %>">
      <button class="verify-btn" type="submit">
        VERIFY PROPERTY
      </button>
    </form>
  </div>

  <!-- FIX PRICE -->
  <div class="section">
    <h3>Fix Property Price</h3>

    <form method="POST" action="/agent/fix-price/<%= property.id %>">
      <input
        type="number"
        name="final_amount"
        placeholder="Final Selling Amount (‚Çπ)"
        required
        inputmode="numeric"
        min="0"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />

      <input
        type="number"
        name="govt_amount"
        placeholder="Government Value (‚Çπ)"
        required
        inputmode="numeric"
        min="0"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />

      <button class="price-btn" type="submit">
        Save Price
      </button>
    </form>
  </div>

</div>

<script>
  const input = document.getElementById('imageInput');
  const previewBtn = document.getElementById('previewBtn');
  const previewContainer = document.getElementById('previewContainer');

  previewBtn.addEventListener('click', () => {
    previewContainer.innerHTML = '';

    if (!input.files || input.files.length === 0) {
      previewContainer.innerHTML =
        '<p style="font-size:13px;color:#64748b;">No images selected.</p>';
      return;
    }

    Array.from(input.files).forEach(file => {
      if (!file.type.startsWith('image/')) return;

      const img = document.createElement('img');
      img.src = URL.createObjectURL(file);
      img.alt = file.name;
      previewContainer.appendChild(img);
    });
  });
</script>

</body>
</html>